# Graph500

## 问题描述

Graph500是非常著名的高性能计算Benchmark，其主要用于评估超级计算机图计算性能。Graph500 的提出是为了填补传统高性能计算Benchmark（如 LINPACK）的空白，后者主要关注于密集矩阵运算，而现实世界中的许多问题都是图问题。Graph500 通过提供一个标准化的测试，使得研究人员和工程师可以比较不同系统在处理图计算任务时的性能。

此题目运行的大致流程如下：

1. 配置所需的环境变量
2. 自行配置你需要的编译器等module
3. 对graph500源码进行编译
4. 运行graph500程序
5. 通过修改到最合适的任务参数、以及调整程序的运行方式、更改环境配置来提升TEPS(Traversed Edges Per Second,每秒遍历的边数)
6. 编写一个完整的shell脚本去完成上述整个流程并且提交,示例脚本已经提供

## 输入输出格式

核心运行指令应类似：

```bash
./graph500_reference_bfs_sssp 18
```

可以根据你的运行方式自行修改该命令，推荐使用`time`命令记录实际运行时间，同时将`stderr`信息重定向到`/dev/null`去更好地读取最终结果

## 编译运行

编译过程非常简单，直接使用源码中的Makefile即可完成编译

```bash
# 假设此时已经位于source_code目录下
bash graph.sh #运行你自己的实现
```

## 评分标准

**本题你需要提交`graph.sh`文件**，我们会将你提交的`graph.sh`替换原有的文件并使用如上指令运行你的程序

本题目可以最多可以使用比赛集群上一台机器的**128个核心**。

你的最终得分将基于bfs以及sssp两个kernel结果的调和平均值进行计算

| 算例  | 分数占比 | 满分(TEPS) | 基础(TEPS) |
| --- | ---- | ----| -----|
| bfs  harmonic_mean_TEPS | 60% | 1.4e+09 |  3e+07 |
| sssp harmonic_mean_TEPS | 40% | 4.5e+08 |  6e+06 |

实际获得分数的计算公式为

$$\min(\max( (\frac{实际数值-基础数值}{满分数值-基础数值})^2,0),1) \times 100$$

## 评测脚本使用

我们提供了`evaluate.py`用于自测你当前的答题情况。直接运行

``` bash
python evaluate.py 
```

注意：进行本地测评时你的脚本文件要放在指定路径下

该测试脚本将对你目前的答案进行评测，并输出你的得分。

## 提示

1. 请**不要修改**本题目源码和Makefile
2. 为了保证结果的正确性， 你的**正式提交不应当跳过验证部分**，请注意环境变量的设置确保进行了正确性检验
2. 任何运行超过**40min**的进程会被强制结束
3. 注意你提交的脚本中需要包含一个make命令对源码进行编译后才能正确运行
4. 更多相关的信息以及隐藏提示，请利用自身的信息素养，可参考官方代码仓库以及[Graph500官网](https://graph500.org/)
